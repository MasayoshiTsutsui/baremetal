05-201020 筒井政成

lapicタイマーの周波数の測定。
大まかな方針としては、initialcounterレジスタに、32ビットいっぱいの初期値を書き込んだあと、課題B1で作成したpm_timer_wait_millisec関数で一定時間待って、currentcounterからカウンタ値を取得。
そしてinitialcounterとのカウンタ値の差分を、待ち時間で割ることで、周波数を測定することができる。

気をつけた点としては、
pm_timer_wait_millisec関数がポーリングによって時間経過を測っており、どうしても1回1回のポーリングの時間間隔以上の精度で時間をはかることができないため、
なるべくpm_timer_wait_millisecに渡す待ち時間を長くすることで、その精度の粗さによる、実際の周波数値と計算による予測値との間の誤差を小さくするようにしたことである。